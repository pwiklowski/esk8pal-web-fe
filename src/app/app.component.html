<div class="page" *ngIf="!authorized">
  <google-signin></google-signin>
</div>

<div class="page" *ngIf="authorized">
  <div id="map" class="map"></div>

  <div class="navigator">
    <div class="nav-top">
      <img class="nav-avatar" src="{{ profile?.getImageUrl() }}" />
      <div class="nav-username">{{ profile?.getName() }}</div>
    </div>

    <div class="title">
      Upload your GPX file
    </div>
    <input type="file" (change)="filesToUploadChanged($event)" />
    <button (click)="uploadGpx()">Upload GPX</button>
    <button (click)="uploadCsv()">Upload CSV</button>

    <div *ngFor="let ride of rides" class="ride" (click)="loadRide(ride._id)">
      <div>{{ ride.fileName }}</div>

      <div>Start: {{ ride.metaData.start }}</div>
      <div>Time: {{ ride.metaData.tripTime / 1000 }}</div>
      <div>Distance: {{ ride.metaData.tripDistance }}</div>
      <div>Energy used: {{ ride.metaData.tripUsedEnergy }}</div>
      <div>Max speed: {{ ride.metaData.maxSpped }}</div>
      <div>Max current: {{ ride.metaData.maxCurrent }}</div>
    </div>
  </div>

  <router-outlet></router-outlet>
</div>
